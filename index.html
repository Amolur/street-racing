<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0a">
    <title>Night Race - –ö–∏–±–µ—Ä–ø–∞–Ω–∫ –≥–æ–Ω–∫–∏</title>
    <link rel="stylesheet" href="new-style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
    <div class="cyber-grid"></div>
    <div class="neon-lines">
        <div class="neon-line"></div>
        <div class="neon-line"></div>
        <div class="neon-line"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="cyber-logo">
                <div class="logo-text">NIGHT</div>
                <div class="logo-text accent">RACE</div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <div class="loading-particles">
                    <span></span><span></span><span></span>
                </div>
            </div>
            <p class="loading-text glitch" data-text="–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</p>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="auth-container" class="auth-container">
        <div class="auth-wrapper">
            <div class="auth-box">
                <div class="auth-header">
                    <h1 class="cyber-title">
                        <span class="title-main">NIGHT</span>
                        <span class="title-accent">RACE</span>
                    </h1>
                    <p class="cyber-subtitle">–ö–ò–ë–ï–†–ü–ê–ù–ö –£–õ–ò–ß–ù–´–ï –ì–û–ù–ö–ò</p>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <div id="login-form" class="auth-form active">
                    <h2 class="form-title">–í–•–û–î –í –°–ò–°–¢–ï–ú–£</h2>
                    <div class="cyber-input-group">
                        <input type="text" id="login-username" class="cyber-input" placeholder=" " maxlength="20" autocomplete="username">
                        <label class="cyber-label">–õ–æ–≥–∏–Ω</label>
                        <div class="input-line"></div>
                        <span class="input-icon">‚ñ∂</span>
                    </div>
                    <div class="cyber-input-group">
                        <input type="password" id="login-password" class="cyber-input" placeholder=" " maxlength="30" autocomplete="current-password">
                        <label class="cyber-label">–ü–∞—Ä–æ–ª—å</label>
                        <div class="input-line"></div>
                        <span class="input-icon">‚óÄ</span>
                    </div>
                    <button class="cyber-button primary" onclick="handleLogin()">
                        <span class="button-text">–í–û–ô–¢–ò</span>
                        <div class="button-glow"></div>
                    </button>
                    <div class="auth-switch">
                        <span>–ù–æ–≤—ã–π –ø–∏–ª–æ—Ç?</span>
                        <a href="#" onclick="showRegisterForm()" class="cyber-link">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    </div>
                </div>
                
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <div id="register-form" class="auth-form">
                    <h2 class="form-title">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</h2>
                    <div class="cyber-input-group">
                        <input type="text" id="register-username" class="cyber-input" placeholder=" " maxlength="20">
                        <label class="cyber-label">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω</label>
                        <div class="input-line"></div>
                        <span class="input-icon">‚ñ∂</span>
                    </div>
                    <div class="cyber-input-group">
                        <input type="password" id="register-password" class="cyber-input" placeholder=" " maxlength="30">
                        <label class="cyber-label">–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <div class="input-line"></div>
                        <span class="input-icon">‚óÄ</span>
                    </div>
                    <div class="cyber-input-group">
                        <input type="password" id="register-password-confirm" class="cyber-input" placeholder=" " maxlength="30">
                        <label class="cyber-label">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <div class="input-line"></div>
                        <span class="input-icon">‚óÄ</span>
                    </div>
                    <button class="cyber-button primary" onclick="handleRegister()">
                        <span class="button-text">–°–û–ó–î–ê–¢–¨</span>
                        <div class="button-glow"></div>
                    </button>
                    <div class="auth-switch">
                        <span>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</span>
                        <a href="#" onclick="showLoginForm()" class="cyber-link">–í–æ–π—Ç–∏</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ò–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="game-container" style="display: none;">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <header class="game-header">
            <div class="header-content">
                <div class="header-logo" onclick="showMainMenu()">
                    <span class="logo-n">N</span><span class="logo-r">R</span>
                </div>
                <div class="header-stats" id="header-stats">
                    <div class="stat-item">
                        <span class="stat-icon">‚óÜ</span>
                        <span class="stat-value" id="header-level">1</span>
                    </div>
                    <div class="stat-item money">
                        <span class="stat-icon">$</span>
                        <span class="stat-value" id="header-money">1000</span>
                    </div>
                    <div class="stat-item fuel">
                        <span class="stat-icon">‚ö°</span>
                        <span class="stat-value" id="header-fuel">30/30</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="game-main">
            <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
            <div id="main-menu" class="game-screen active">
                <div class="main-menu-content">
                    <div class="player-card">
                        <div class="player-avatar">
                            <div class="avatar-frame">
                                <img src="https://ui-avatars.com/api/?name=Player&background=00ffff&color=0a0a0a&size=100" alt="Avatar" class="avatar-img">
                                <div class="avatar-glow"></div>
                            </div>
                        </div>
                        <div class="player-info">
                            <h3 class="player-name" id="player-name">–ü–∏–ª–æ—Ç</h3>
                            <div class="player-level">
                                <span class="level-label">–£–†–û–í–ï–ù–¨</span>
                                <span class="level-value" id="player-level">1</span>
                            </div>
                        </div>
                    </div>

                    <nav class="menu-grid">
                        <button class="menu-card race" onclick="showRaceMenu()">
                            <div class="card-icon">üèÅ</div>
                            <div class="card-content">
                                <h3>–ì–û–ù–ö–ê</h3>
                                <p>–ù–∞—á–∞—Ç—å –∑–∞–µ–∑–¥</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-glow"></div>
                        </button>

                        <button class="menu-card garage" onclick="showGarageScreen()">
                            <div class="card-icon">üîß</div>
                            <div class="card-content">
                                <h3>–ì–ê–†–ê–ñ</h3>
                                <p>–¢—é–Ω–∏–Ω–≥ –º–∞—à–∏–Ω</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-glow"></div>
                        </button>

                        <button class="menu-card shop" onclick="showShopScreen()">
                            <div class="card-icon">üõçÔ∏è</div>
                            <div class="card-content">
                                <h3>–ú–ê–ì–ê–ó–ò–ù</h3>
                                <p>–ù–æ–≤—ã–µ —Ç–∞—á–∫–∏</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-glow"></div>
                        </button>

                        <button class="menu-card tasks" onclick="showDailyTasksScreen()">
                            <div class="card-icon">üìã</div>
                            <div class="card-content">
                                <h3>–ó–ê–î–ê–ù–ò–Ø</h3>
                                <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-badge" id="daily-tasks-counter" style="display: none;">0</div>
                            <div class="card-glow"></div>
                        </button>

                        <button class="menu-card leaderboard" onclick="showLeaderboardScreen()">
                            <div class="card-icon">üèÜ</div>
                            <div class="card-content">
                                <h3>–†–ï–ô–¢–ò–ù–ì</h3>
                                <p>–õ—É—á—à–∏–µ –ø–∏–ª–æ—Ç—ã</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-glow"></div>
                        </button>

                        <button class="menu-card logout" onclick="logout()">
                            <div class="card-icon">üö™</div>
                            <div class="card-content">
                                <h3>–í–´–•–û–î</h3>
                                <p>–ò–∑ —Å–∏—Å—Ç–µ–º—ã</p>
                            </div>
                            <div class="card-arrow">‚Üí</div>
                            <div class="card-glow"></div>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- –ì–∞—Ä–∞–∂ -->
            <div id="garage-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–ì–ê–†–ê–ñ</h2>
                </div>
                
                <div class="garage-layout">
                    <!-- 3D –ø—Ä–µ–≤—å—é –º–∞—à–∏–Ω—ã -->
                    <div class="car-showcase-3d">
                        <div class="car-model">
                            <div class="car-body">
                                <div class="car-roof"></div>
                                <div class="car-hood"></div>
                                <div class="car-side"></div>
                                <div class="car-wheels">
                                    <div class="wheel front"></div>
                                    <div class="wheel rear"></div>
                                </div>
                            </div>
                            <div class="car-shadow"></div>
                        </div>
                        <div class="car-info-overlay">
                            <h3 id="current-car-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                            <div class="car-stats-compact">
                                <div class="stat-compact">
                                    <span>PWR</span>
                                    <span id="car-total-power">0</span>
                                </div>
                                <div class="stat-compact">
                                    <span>FUEL</span>
                                    <span id="car-fuel-display">30/30</span>
                                </div>
                                <div class="stat-compact rating">
                                    <span id="car-rating">D</span>
                                </div>
                            </div>
                        </div>
                        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
                        <div class="car-navigation">
                            <button class="nav-btn prev" onclick="previousCar()">‚óÄ</button>
                            <div class="car-dots" id="car-counter">1/1</div>
                            <button class="nav-btn next" onclick="nextCar()">‚ñ∂</button>
                        </div>
                    </div>

                    <!-- –ü–∞–Ω–µ–ª—å —É–ª—É—á—à–µ–Ω–∏–π -->
                    <div class="upgrade-panel">
                        <div class="panel-tabs">
                            <button class="panel-tab active" onclick="showGarageTab('upgrades')">
                                <span class="tab-icon">‚öôÔ∏è</span>
                                <span>–¢–Æ–ù–ò–ù–ì</span>
                            </button>
                            <button class="panel-tab" onclick="showGarageTab('stats')">
                                <span class="tab-icon">üìä</span>
                                <span>–°–¢–ê–¢–´</span>
                            </button>
                            <button class="panel-tab" onclick="showGarageTab('parts')">
                                <span class="tab-icon">‚ö°</span>
                                <span>–î–ï–¢–ê–õ–ò</span>
                            </button>
                        </div>

                        <div class="panel-content">
                            <!-- –í–∫–ª–∞–¥–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π -->
                            <div id="tab-upgrades" class="tab-panel active">
                                <div id="upgrades-list" class="upgrades-grid"></div>
                            </div>

                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                            <div id="tab-stats" class="tab-panel">
                                <div class="stats-visualization">
                                    <div class="stat-bar-item">
                                        <div class="stat-label">
                                            <span class="stat-icon">üí™</span>
                                            <span>–ú–æ—â–Ω–æ—Å—Ç—å</span>
                                        </div>
                                        <div class="stat-bar-wrapper">
                                            <div class="stat-bar">
                                                <div class="stat-fill" id="fill-power"></div>
                                            </div>
                                            <span class="stat-number" id="stat-power">0</span>
                                        </div>
                                    </div>
                                    <div class="stat-bar-item">
                                        <div class="stat-label">
                                            <span class="stat-icon">üí®</span>
                                            <span>–°–∫–æ—Ä–æ—Å—Ç—å</span>
                                        </div>
                                        <div class="stat-bar-wrapper">
                                            <div class="stat-bar">
                                                <div class="stat-fill" id="fill-speed"></div>
                                            </div>
                                            <span class="stat-number" id="stat-speed">0</span>
                                        </div>
                                    </div>
                                    <div class="stat-bar-item">
                                        <div class="stat-label">
                                            <span class="stat-icon">üéØ</span>
                                            <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                                        </div>
                                        <div class="stat-bar-wrapper">
                                            <div class="stat-bar">
                                                <div class="stat-fill" id="fill-handling"></div>
                                            </div>
                                            <span class="stat-number" id="stat-handling">0</span>
                                        </div>
                                    </div>
                                    <div class="stat-bar-item">
                                        <div class="stat-label">
                                            <span class="stat-icon">üöÄ</span>
                                            <span>–†–∞–∑–≥–æ–Ω</span>
                                        </div>
                                        <div class="stat-bar-wrapper">
                                            <div class="stat-bar">
                                                <div class="stat-fill" id="fill-acceleration"></div>
                                            </div>
                                            <span class="stat-number" id="stat-acceleration">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- –í–∫–ª–∞–¥–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π -->
                            <div id="tab-parts" class="tab-panel">
                                <div id="special-parts-list" class="parts-grid"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –≥–æ–Ω–∫–∏ -->
            <div id="race-menu-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–í–´–ë–û–† –°–û–ü–ï–†–ù–ò–ö–ê</h2>
                </div>
                
                <div class="race-status-bar">
                    <div class="status-item">
                        <span class="status-label">–ú–ê–®–ò–ù–ê</span>
                        <span class="status-value" id="race-current-car">-</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">–¢–û–ü–õ–ò–í–û</span>
                        <span class="status-value fuel" id="race-car-fuel">-</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">–ë–ê–õ–ê–ù–°</span>
                        <span class="status-value money">$<span id="race-balance">-</span></span>
                    </div>
                </div>
                
                <div id="opponents-list" class="opponents-grid"></div>
            </div>

            <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≥–æ–Ω–∫–∏ -->
            <div id="race-result-screen" class="game-screen">
                <div id="race-result" class="race-result-container"></div>
            </div>

            <!-- –ú–∞–≥–∞–∑–∏–Ω -->
            <div id="shop-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–ê–í–¢–û–°–ê–õ–û–ù</h2>
                </div>
                
                <div class="shop-tabs-container">
                    <div class="shop-tabs">
                        <button class="shop-tab active" onclick="showShopTab('buy')">
                            <span class="tab-icon">üöó</span>
                            <span>–ü–û–ö–£–ü–ö–ê</span>
                        </button>
                        <button class="shop-tab" onclick="showShopTab('sell')">
                            <span class="tab-icon">üí∞</span>
                            <span>–ü–†–û–î–ê–ñ–ê</span>
                        </button>
                    </div>
                </div>
                
                <div id="shop-buy" class="shop-content active">
                    <div id="cars-for-sale" class="cars-showcase"></div>
                </div>
                
                <div id="shop-sell" class="shop-content">
                    <div id="cars-to-sell" class="cars-showcase"></div>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ -->
            <div id="leaderboard-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–†–ï–ô–¢–ò–ù–ì –ü–ò–õ–û–¢–û–í</h2>
                </div>
                
                <div class="leaderboard-container">
                    <div class="leaderboard-header">
                        <h3>–¢–û–ü –ì–û–ù–©–ò–ö–û–í</h3>
                    </div>
                    <div id="leaderboard-list" class="leaderboard-list"></div>
                </div>
            </div>

            <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è -->
            <div id="daily-tasks-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–ï–ñ–ï–î–ù–ï–í–ù–´–ï –ó–ê–î–ê–ù–ò–Ø</h2>
                </div>
                
                <div class="tasks-container">
                    <div class="tasks-header">
                        <div class="tasks-timer">
                            <span>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑:</span>
                            <span class="timer-value" id="tasks-timer">23:59:59</span>
                        </div>
                        <div class="tasks-progress">
                            <span>–í—ã–ø–æ–ª–Ω–µ–Ω–æ:</span>
                            <span class="progress-value" id="tasks-completed">0/3</span>
                        </div>
                    </div>
                    
                    <div id="daily-tasks-list" class="tasks-list"></div>
                    
                    <div class="tasks-bonus">
                        <div class="bonus-text">
                            <span class="bonus-icon">üéÅ</span>
                            <span>–í—ã–ø–æ–ª–Ω–∏ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏ –±–æ–Ω—É—Å <strong>$1000</strong>!</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å (—Å–∫—Ä—ã—Ç—ã–π —ç–∫—Ä–∞–Ω) -->
            <div id="profile-screen" class="game-screen">
                <div class="screen-header">
                    <button class="btn-back" onclick="goBack()">
                        <span class="back-icon">‚óÄ</span>
                        <span>–ù–ê–ó–ê–î</span>
                    </button>
                    <h2 class="screen-title">–ü–†–û–§–ò–õ–¨</h2>
                </div>
                
                <div class="profile-container" style="display: none;">
                    <!-- –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ -->
                    <span id="profile-username"></span>
                    <span id="profile-level"></span>
                    <span id="profile-xp"></span>
                    <span id="profile-xp-next"></span>
                    <div id="profile-xp-fill"></div>
                    <span id="profile-wins"></span>
                    <span id="profile-cars"></span>
                    <span id="profile-rating"></span>
                    <div id="profile-stats"></div>
                    <div id="profile-skills-display"></div>
                    <img class="profile-avatar" style="display: none;">
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–≤—å—é –≥–æ–Ω–∫–∏ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="error-notification" class="cyber-notification"></div>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-indicator" class="loading-indicator">
        <div class="loading-spinner">
            <div class="cyber-spinner">
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
                <div class="spinner-blade"></div>
            </div>
            <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="api.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>
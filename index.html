<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Racing - –ì–æ–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞</title>
    <link rel="stylesheet" href="racing-mobile-ui.css">
    <meta name="theme-color" content="#ff4444">
    <meta name="description" content="Street Racing - –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∞—è –º–æ–±–∏–ª—å–Ω–∞—è –≥–æ–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞">
    
    <!-- PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç -->
    <link rel="manifest" href="manifest.json">
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="mobile-container">
        
        <!-- ================================ -->
        <!-- –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò -->
        <!-- ================================ -->
        <div id="auth-screen" class="mobile-screen active">
            <div class="mobile-header">
                <div class="header-logo-section" onclick="window.location.reload()">
                    <img src="logo.png" alt="Street Racing" class="full-width-logo" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="text-logo-fallback" style="display: none;">Street Racing</div>
                </div>
            </div>
            
            <div class="mobile-main">
                <div class="screen-content" style="justify-content: center;">
                    
                    <!-- –§–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
                    <div class="auth-container">
                        
                        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                        <div id="login-form" class="auth-form active">
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">–í—Ö–æ–¥ –≤ –∏–≥—Ä—É</h2>
                                </div>
                                <div class="card-body">
                                    <form onsubmit="window.handleLogin(); return false;">
                                        <div class="form-group">
                                            <label class="form-label">–õ–æ–≥–∏–Ω</label>
                                            <input type="text" id="login-username" class="form-input" 
                                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" autocomplete="username" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                                            <input type="password" id="login-password" class="form-input" 
                                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="current-password" required>
                                        </div>
                                        
                                        <button type="submit" class="action-button">
                                            –í–æ–π—Ç–∏ –≤ –∏–≥—Ä—É
                                        </button>
                                    </form>
                                    
                                    <div style="text-align: center; margin-top: 20px;">
                                        <p style="color: var(--race-text-secondary); font-size: 14px;">
                                            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
                                        </p>
                                        <button type="button" class="action-button secondary" 
                                                onclick="window.showRegisterForm()" style="margin-top: 10px;">
                                            –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                        <div id="register-form" class="auth-form">
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                                </div>
                                <div class="card-body">
                                    <form onsubmit="window.handleRegister(); return false;">
                                        <div class="form-group">
                                            <label class="form-label">–õ–æ–≥–∏–Ω</label>
                                            <input type="text" id="register-username" class="form-input" 
                                                   placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω" autocomplete="username" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                                            <input type="password" id="register-password" class="form-input" 
                                                   placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="new-password" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                                            <input type="password" id="register-password-confirm" class="form-input" 
                                                   placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="new-password" required>
                                        </div>
                                        
                                        <button type="submit" class="action-button">
                                            –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                                        </button>
                                    </form>
                                    
                                    <div style="text-align: center; margin-top: 20px;">
                                        <p style="color: var(--race-text-secondary); font-size: 14px;">
                                            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?
                                        </p>
                                        <button type="button" class="action-button secondary" 
                                                onclick="window.showLoginForm()" style="margin-top: 10px;">
                                            –í–æ–π—Ç–∏
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
        </div>
        
        <!-- ================================ -->
        <!-- –û–°–ù–û–í–ù–ê–Ø –ò–ì–†–ê -->
        <!-- ================================ -->
        <div id="game-container" class="mobile-screen">
            
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
            <div class="mobile-header">
                <div class="header-logo-section" onclick="window.showMainMenu()">
                    <img src="logo.png" alt="Street Racing" class="full-width-logo" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="text-logo-fallback" style="display: none;">Street Racing</div>
                </div>
                
                <!-- –ü–∞–Ω–µ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–≥—Ä–æ–∫–∞ -->
                <div class="player-info-bar">
                    <div class="info-bar-content">
                        <div class="resource-item">
                            <div class="resource-icon level">Lv</div>
                            <span id="header-level">1</span>
                        </div>
                        
                        <div class="resource-item">
                            <div class="resource-icon money">$</div>
                            <span id="header-money">0</span>
                        </div>
                        
                        <div class="resource-item">
                            <div class="resource-icon fuel">‚õΩ</div>
                            <span id="header-fuel">30</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã -->
            <div class="mobile-main">
                
                <!-- ================================ -->
                <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
                <!-- ================================ -->
                <div id="main-menu" class="mobile-screen active">
                    <div class="main-menu-container">
                        
                        <div class="welcome-message">
                            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="player-name">–ì–æ–Ω—â–∏–∫</span>!</h2>
                        </div>
                        
                        <div class="menu-grid">
                            <button class="menu-button race" onclick="window.showRaceMenu()">
                                <div>
                                    <div class="menu-button-title">üèÅ –ì–æ–Ω–∫–∏</div>
                                    <div class="menu-button-subtitle">–°–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å —Å–æ–ø–µ—Ä–Ω–∏–∫–∞–º–∏</div>
                                </div>
                            </button>
                            
                            <button class="menu-button garage" onclick="window.showGarage()">
                                <div>
                                    <div class="menu-button-title">üöó –ì–∞—Ä–∞–∂</div>
                                    <div class="menu-button-subtitle">–ú–∞—à–∏–Ω: <span id="player-cars">1</span></div>
                                </div>
                            </button>
                            
                            <button class="menu-button shop" onclick="window.showShop()">
                                <div>
                                    <div class="menu-button-title">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
                                    <div class="menu-button-subtitle">–ü–æ–∫—É–ø–∫–∞ –º–∞—à–∏–Ω –∏ –¥–µ—Ç–∞–ª–µ–π</div>
                                </div>
                            </button>
                            
                            <button class="menu-button tasks" onclick="window.showDailyTasks()">
                                <div>
                                    <div class="menu-button-title">üìã –ó–∞–¥–∞–Ω–∏—è</div>
                                    <div class="menu-button-subtitle">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</div>
                                </div>
                                <div id="daily-tasks-counter" class="badge" style="display: none;">0</div>
                            </button>
                            
                            <button class="menu-button secondary" onclick="window.showProfile()">
                                <div>
                                    <div class="menu-button-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
                                    <div class="menu-button-subtitle">–£—Ä–æ–≤–µ–Ω—å: <span id="player-level">1</span>, –ü–æ–±–µ–¥: <span id="player-wins">0</span></div>
                                </div>
                            </button>
                            
                            <button class="menu-button secondary" onclick="window.showCommunity()">
                                <div>
                                    <div class="menu-button-title">üí¨ –°–æ–æ–±—â–µ—Å—Ç–≤–æ</div>
                                    <div class="menu-button-subtitle">–ß–∞—Ç –∏ –Ω–æ–≤–æ—Å—Ç–∏</div>
                                </div>
                            </button>
                            
                            <button class="menu-button secondary" onclick="window.showLeaderboard()">
                                <div>
                                    <div class="menu-button-title">üèÜ –†–µ–π—Ç–∏–Ω–≥</div>
                                    <div class="menu-button-subtitle">–õ—É—á—à–∏–µ –∏–≥—Ä–æ–∫–∏</div>
                                </div>
                            </button>
                            
                            <button class="menu-button secondary" onclick="window.logout()">
                                <div>
                                    <div class="menu-button-title">üö™ –í—ã—Ö–æ–¥</div>
                                    <div class="menu-button-subtitle">–í—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã</div>
                                </div>
                            </button>
                        </div>
                        
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –ì–û–ù–û–ö -->
                <!-- ================================ -->
                <div id="race-menu" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–ì–æ–Ω–∫–∏</span>
                    </div>
                    
                    <div class="screen-content">
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –º–∞—à–∏–Ω–µ -->
                        <div class="info-panel">
                            <div class="info-panel-header">
                                <span class="info-panel-title">–í–∞—à–∞ –º–∞—à–∏–Ω–∞</span>
                            </div>
                            <div class="stat-row">
                                <span>–ú–∞—à–∏–Ω–∞:</span>
                                <span id="race-current-car">-</span>
                            </div>
                            <div class="stat-row">
                                <span>–¢–æ–ø–ª–∏–≤–æ:</span>
                                <span id="race-car-fuel">-</span>
                            </div>
                            <div class="stat-row">
                                <span>–ë–∞–ª–∞–Ω—Å:</span>
                                <span>$<span id="race-balance">0</span></span>
                            </div>
                        </div>
                        
                        <!-- –°–ø–∏—Å–æ–∫ —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">–°–æ–ø–µ—Ä–Ω–∏–∫–∏</h3>
                            </div>
                            <div class="card-body">
                                <div id="opponents-list">
                                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–ê –ì–û–ù–ö–ò -->
                <!-- ================================ -->
                <div id="race-result-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.showRaceMenu()">‚Üê</button>
                        <span class="screen-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ–Ω–∫–∏</span>
                    </div>
                    
                    <div class="screen-content">
                        <div id="race-result">
                            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –ì–ê–†–ê–ñ–ê -->
                <!-- ================================ -->
                <div id="garage-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–ì–∞—Ä–∞–∂</span>
                    </div>
                    
                    <div class="screen-content">
                        <div id="garage-content">
                            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≥–∞—Ä–∞–∂–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –ú–ê–ì–ê–ó–ò–ù–ê -->
                <!-- ================================ -->
                <div id="shop-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–ú–∞–≥–∞–∑–∏–Ω</span>
                    </div>
                    
                    <div class="screen-content">
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <button class="tab-button active" onclick="window.showShopTab('buy')">
                                    –ü–æ–∫—É–ø–∫–∞
                                </button>
                                <button class="tab-button" onclick="window.showShopTab('sell')">
                                    –ü—Ä–æ–¥–∞–∂–∞
                                </button>
                            </div>
                            
                            <div id="shop-buy" class="tab-content active">
                                <div id="cars-for-sale">
                                    <!-- –ú–∞—à–∏–Ω—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏ -->
                                </div>
                            </div>
                            
                            <div id="shop-sell" class="tab-content">
                                <div id="cars-to-sell">
                                    <!-- –ú–∞—à–∏–Ω—ã –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –ï–ñ–ï–î–ù–ï–í–ù–´–• –ó–ê–î–ê–ù–ò–ô -->
                <!-- ================================ -->
                <div id="daily-tasks-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</span>
                    </div>
                    
                    <div class="screen-content">
                        <div class="info-panel">
                            <div class="info-panel-header">
                                <span class="info-panel-title">–í—Ä–µ–º—è –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</span>
                                <span id="tasks-timer">--:--:--</span>
                            </div>
                        </div>
                        
                        <div id="daily-tasks-list">
                            <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø -->
                <!-- ================================ -->
                <div id="profile-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </div>
                    
                    <div class="screen-content">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title" id="profile-username">–ò–≥—Ä–æ–∫</h3>
                                <img class="profile-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä" style="width: 50px; height: 50px; border-radius: 50%;">
                            </div>
                            
                            <div class="card-body">
                                <div class="stats-grid">
                                    <div class="stat-item">
                                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                                        <div class="stat-value" id="profile-level">1</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">–û–ø—ã—Ç</div>
                                        <div class="stat-value" id="profile-experience">0</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">–î–µ–Ω—å–≥–∏</div>
                                        <div class="stat-value" id="profile-money">$0</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">–ü–æ–±–µ–¥</div>
                                        <div class="stat-value" id="profile-wins">0</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">–í—Å–µ–≥–æ –≥–æ–Ω–æ–∫</div>
                                        <div class="stat-value" id="profile-total-races">0</div>
                                    </div>
                                    
                                    <div class="stat-item">
                                        <div class="stat-label">–ú–∞—à–∏–Ω</div>
                                        <div class="stat-value" id="profile-cars-count">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                                <span><span id="unlocked-achievements">0</span>/<span id="total-achievements">0</span></span>
                            </div>
                            <div class="card-body">
                                <div id="achievements-list">
                                    <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –°–û–û–ë–©–ï–°–¢–í–ê -->
                <!-- ================================ -->
                <div id="community-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</span>
                    </div>
                    
                    <div class="screen-content">
                        <div class="tabs-container">
                            <div class="tabs-header">
                                <button class="tab-button active" onclick="window.showChatTab('chat')">
                                    –ß–∞—Ç
                                </button>
                                <button class="tab-button" onclick="window.showChatTab('news')">
                                    –ù–æ–≤–æ—Å—Ç–∏
                                </button>
                            </div>
                            
                            <div id="community-chat" class="tab-content active">
                                <div style="height: 300px; overflow-y: auto; border: 1px solid var(--race-border); border-radius: var(--race-radius); margin-bottom: 12px;">
                                    <div id="chat-messages" style="padding: 12px;">
                                        <!-- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ -->
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: 8px;">
                                    <input type="text" id="chat-input" class="form-input" 
                                           placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex: 1;">
                                    <button class="action-button small" onclick="window.sendChatMessage()">
                                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                                    </button>
                                </div>
                            </div>
                            
                            <div id="community-news" class="tab-content">
                                <div id="news-list">
                                    <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ================================ -->
                <!-- –≠–ö–†–ê–ù –†–ï–ô–¢–ò–ù–ì–ê -->
                <!-- ================================ -->
                <div id="leaderboard-screen" class="mobile-screen">
                    <div class="screen-header">
                        <button class="back-button" onclick="window.goBack()">‚Üê</button>
                        <span class="screen-title">–†–µ–π—Ç–∏–Ω–≥</span>
                    </div>
                    
                    <div class="screen-content">
                        <div id="leaderboard-list">
                            <!-- –†–µ–π—Ç–∏–Ω–≥ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div id="save-indicator" class="save-indicator">
        <span class="save-icon">üíæ</span>
        <span class="save-text">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
    </div>
    
    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="api.js"></script>
    <script type="module" src="modules/notifications.js"></script>
    <script type="module" src="app.js"></script>
    
</body>
</html>